<div [appPreviewMode]="previewMode" [ngClass]="{ 'preview-mode': previewMode }">
  <p-toast></p-toast>
  <form [formGroup]="formGroup">
    <div class="input-group">
      <div style="display: flex; gap: 0.5rem; align-items: center">
        <label for="name">1) Name of the Applicant <span>*</span></label>
        <div
          pTooltip="Full expanded name to be mentioned as appearing in proof of identity/address documents; the name should be provided without any abbreviations."
          tooltipPosition="right">
          <i class="pi pi-info-circle" style="font-size: 14px; color: #748297"></i>
        </div>
      </div>
      <input id="name" type="text" pInputText formControlName="name" placeholder="Enter Your Name" maxlength="300"
        [ngClass]="{'invalid-field': formGroup.get('name')?.invalid && formGroup.get('name')?.touched}" />
      <div *ngIf="formGroup.get('name')?.invalid && formGroup.get('name')?.touched" class="error-message">
        Please enter a valid name.
      </div>
    </div>

    <div class="input-group">
      <div style="display: flex; gap: 3rem">
        <div style="display: flex; gap: 0.5rem; align-items: center">
          <label for="applicantOtherName">2) Have you ever been known by any other name? <span>*</span></label>
          <div pTooltip="If yes, please give the other name" tooltipPosition="right">
            <i class="pi pi-info-circle" style="font-size: 14px; color: #748297"></i>
          </div>
        </div>
        <div formGroupName="applicantOtherName" style="display: flex; gap: 3rem">
          <div class="radio">
            <p-radiobutton [value]="true" inputId="otherNameYes" formControlName="otherNameRadio"
              [ngClass]="{'invalid-field':formGroup.get('applicantOtherName.otherNameRadio')?.invalid &&formGroup.get('applicantOtherName.otherNameRadio')?.touched }"></p-radiobutton>
            <label for="otherNameYes" class="radio-label">Yes</label>
          </div>
          <div class="radio">
            <p-radiobutton [value]="false" inputId="otherNameNo" formControlName="otherNameRadio"
              [ngClass]="{'invalid-field':formGroup.get('applicantOtherName.otherNameRadio')?.invalid && formGroup.get('applicantOtherName.otherNameRadio')?.touched}">
            </p-radiobutton>
            <label for="otherNameNo" class="radio-label">No</label>
          </div>
        </div>
      </div>
      <div
        *ngIf="formGroup.get('applicantOtherName.otherNameRadio')?.invalid &&formGroup.get('applicantOtherName.otherNameRadio')?.touched"
        class="error-message">
        Please select whether you have been known by any other name.
      </div>
      <div formGroupName="applicantOtherName">
        <input *ngIf="formGroup.get('applicantOtherName.otherNameRadio')?.value === true" id="otherNameField"
          type="text" pInputText formControlName="otherNameField" placeholder="Enter Other Name" maxlength="75"
          [ngClass]="{'invalid-field':formGroup.get('applicantOtherName.otherNameField')?.invalid &&formGroup.get('applicantOtherName.otherNameField')?.touched}" />
        <div *ngIf="
            formGroup.get('applicantOtherName.otherNameField')?.invalid &&
            formGroup.get('applicantOtherName.otherNameField')?.touched &&
            formGroup.get('applicantOtherName.otherNameRadio')?.value === true
          " class="error-message">
          Other name field is required.
        </div>
      </div>
    </div>

    <!-- Section 3: Date of Incorporation/Establishment/Formation -->
    <div class="input-group">
      <div style="display: flex; gap: 0.5rem; align-items: center">
        <label for="data" scope="col">
          3) Date of Incorporation/ Establishment/ Formation <span>*</span>
        </label>
        <div pTooltip="Select date" tooltipPosition="right">
          <i class="pi pi-info-circle" style="font-size: 14px; color: #748297"></i>
        </div>
      </div>

      <p-table [value]="[{}]" showGridlines [responsiveLayout]="'scroll'" class="p-datatable-striped">
        <ng-template pTemplate="header">
          <tr>
            <th scope="col">Sr. No</th>
            <th scope="col" class="sub-labels">Particulars</th>
            <th scope="col" class="sub-labels">Date</th>
          </tr>
        </ng-template>

        <ng-template pTemplate="body">
          <tr>
            <td>1</td>
            <td>Date of Incorporation</td>
            <td>
              <p-datepicker id="dateOfIncorporation" formControlName="dateOfIncorporation" [showIcon]="true"
                dateFormat="dd/mm/yy" appendTo="body" [maxDate]="maxDate" [ngClass]="{
                  'invalid-field':
                    formGroup.get('dateOfIncorporation')?.invalid &&
                    formGroup.get('dateOfIncorporation')?.touched
                }"></p-datepicker>
              <div *ngIf="
                  formGroup.get('dateOfIncorporation')?.invalid &&
                  formGroup.get('dateOfIncorporation')?.touched
                " class="error-message">
                Date of Incorporation is required.
              </div>
            </td>
          </tr>

          <tr>
            <td>2</td>
            <td>Date of Commencement</td>
            <td>
              <p-datepicker id="dateOfCommencement" formControlName="dateOfCommencement" [showIcon]="true"
                dateFormat="dd/mm/yy" appendTo="body" [minDate]="minCommencementDate" [maxDate]="maxDate" [ngClass]="{
                  'invalid-field':
                    formGroup.get('dateOfCommencement')?.invalid &&
                    formGroup.get('dateOfCommencement')?.touched
                }"></p-datepicker>
              <div *ngIf="
                  formGroup.get('dateOfCommencement')?.touched &&
                  (formGroup.get('dateOfCommencement')?.invalid || formGroup.hasError('commencementAfterIncorporation'))
                " class="error-message">
                <ng-container *ngIf="formGroup.hasError('commencementAfterIncorporation')">
                  Commencement date cannot be after incorporation date.
                </ng-container>
                <ng-container *ngIf="formGroup.get('dateOfCommencement')?.hasError('required')">
                  Date of Commencement is required.
                </ng-container>
              </div>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>


    <!-- Section 4: Place and Country of Incorporation/Establishment/Formation -->
    <div class="input-group">
      <div style="display: flex; gap: 0.5rem; align-items: center">
        <label for="tableData" scope="col">
          4) Place and Country of Incorporation/ Establishment/ Formation <span>*</span>
        </label>
        <div pTooltip="Select details" tooltipPosition="right">
          <i class="pi pi-info-circle" style="font-size: 14px; color: #748297"></i>
        </div>
      </div>

      <p-table [value]="[{}]" showGridlines [responsiveLayout]="'scroll'" class="p-datatable-striped">
        <ng-template pTemplate="header">
          <tr>
            <th scope="col">Sr. No</th>
            <th scope="col" class="sub-labels">Particulars</th>
            <th scope="col" class="sub-labels">Details</th>
          </tr>
        </ng-template>

        <ng-template pTemplate="body">
          <!-- Row 1: Place of Incorporation -->
          <tr>
            <td>1</td>
            <td>Place of Incorporation <span>*</span></td>
            <td>
              <input id="placeOfIncorporation" type="text" pInputText formControlName="placeOfIncorporation"
                placeholder="Enter place" maxlength="30" [ngClass]="{
                  'invalid-field':
                    formGroup.get('placeOfIncorporation')?.invalid &&
                    formGroup.get('placeOfIncorporation')?.touched
                }" />
              <div *ngIf="
                  formGroup.get('placeOfIncorporation')?.invalid &&
                  formGroup.get('placeOfIncorporation')?.touched
                " class="error-message">
                Place of incorporation is required.
              </div>
            </td>
          </tr>

          <!-- Row 2: Country of Incorporation -->
          <tr>
            <td>2</td>
            <td>Country of Incorporation <span>*</span></td>
            <td>
              <p-select id="countryOfIncorporation" formControlName="countryOfIncorporation"
                placeholder="Select country" [options]="countries" optionLabel="name" [filter]="true"
                [filterBy]="'name'" class="full-width" [showClear]="true" appendTo="body" [ngClass]="{
                  'invalid-field':
                    formGroup.get('countryOfIncorporation')?.invalid &&
                    formGroup.get('countryOfIncorporation')?.touched
                }"></p-select>
              <div *ngIf="
                  formGroup.get('countryOfIncorporation')?.invalid &&
                  formGroup.get('countryOfIncorporation')?.touched
                " class="error-message">
                Country of incorporation is required.
              </div>
            </td>
          </tr>

          <!-- Row 3: Country Code (Disabled) -->
          <tr>
            <td>3</td>
            <td>Country Code <span>*</span></td>
            <td>
              <p-select id="countryCodeOfIncorporation" formControlName="countryCodeOfIncorporation"
                placeholder="Select code" [options]="countryCodes" optionLabel="code" [filter]="true"
                [filterBy]="'code'" class="full-width" [showClear]="true" [disabled]="true" appendTo="body" [ngClass]="{
                  'invalid-field':
                    formGroup.get('countryCodeOfIncorporation')?.invalid &&
                    formGroup.get('countryCodeOfIncorporation')?.touched
                }"></p-select>
              <div *ngIf="
                  formGroup.get('countryCodeOfIncorporation')?.invalid &&
                  formGroup.get('countryCodeOfIncorporation')?.touched
                " class="error-message">
                Country code is required.
              </div>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>


    <div class="input-group">
      <div style="display: flex; gap: 0.5rem; align-items: center">
        <label for="legalForm" scope="col">5) Legal form of the applicant and the law under which it is
          incorporated, established or registered</label>
        <div pTooltip="Enter legal form" tooltipPosition="right">
          <i class="pi pi-info-circle" style="font-size: 14px; color: #748297"></i>
        </div>
      </div>
      <input id="legalForm" type="text" formControlName="legalForm" pInputText />
    </div>

    <div class="input-group">
      <div style="display: flex; gap: 0.5rem; align-items: center">
        <label for="lei" scope="col">6) Legal Entity Identifier & Tax Residency Certificate details: </label>
        <div pTooltip="A Legal Entity Identifier (LEI) is a 20-character alphanumeric code" tooltipPosition="right">
          <i class="pi pi-info-circle" style="font-size: 14px; color: #748297"></i>
        </div>
      </div>
      <label for="registeredOffice" scope="col" class="sub-labels">a) Registered Address of the Applicant
        <span>*</span></label>
      <input id="lei" type="text" pInputText formControlName="lei" maxlength="20" minlength="20" [ngClass]="{
          'invalid-field':
            formGroup.get('lei')?.invalid && formGroup.get('lei')?.touched
        }" (keypress)="alphaNumeric($event)"/>
      <div *ngIf="formGroup.get('lei')?.invalid && formGroup.get('lei')?.touched" class="error-message">
        Please enter valid Legal Entity Identifier. It should be 20 charcter
        alphanumeric code.
      </div>
    </div>

    <div formArrayName="taxResidencyRows">
      <p-table [value]="taxResidencyRows.controls" showGridlines [responsiveLayout]="'scroll'"
        class="p-datatable-striped">
        <ng-template pTemplate="header">
          <tr>
            <th scope="col">Sr. No</th>
            <th scope="col" class="sub-labels">Tax Residency Certificate (TRC) No.</th>
            <th scope="col" class="sub-labels">Country of Tax Residency</th>
            <th scope="col" class="sub-labels">Actions</th>
          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-rowForm let-i="rowIndex">
          <tr [formGroupName]="i" class="table-header">
            <td>{{ rowForm.get("id")?.value }}</td>

            <td>
              <input id="trcNo{{ i }}" type="text" pInputText formControlName="trcNo" maxlength="20" [ngClass]="{
                  'invalid-field':
                    rowForm.get('trcNo')?.invalid &&
                    rowForm.get('trcNo')?.touched
                }" />
              <div *ngIf="rowForm.get('trcNo')?.invalid && rowForm.get('trcNo')?.touched" class="error-message">
                TRC No. is required.
              </div>
            </td>

            <td>
              <p-select id="taxCountry{{ i }}" formControlName="country" placeholder="Select Country"
                [options]="countries_pan" optionLabel="name" [filterBy]="'name'" [filter]="true" [showClear]="true"
                appendTo="body" class="full-width" [ngClass]="{
                  'invalid-field':
                    rowForm.hasError('countryRequired') &&
                    rowForm.get('country')?.touched
                }"></p-select>
              <div *ngIf="rowForm.get('country')?.invalid && rowForm.get('country')?.touched" class="error-message">
                Country is required.
              </div>
              <div *ngIf="
                    rowForm.hasError('countryRequired') &&
                    rowForm.get('country')?.touched
                  " class="error-message">
                Country is required if TRC No. is entered.
              </div>
            </td>

            <td>
              <button pButton icon="pi pi-plus" class="p-button-rounded p-button-text" (click)="addRow()"
                type="button"></button>
              <button *ngIf="taxResidencyRows.length > 1" pButton icon="pi pi-trash"
                class="p-button-rounded p-button-danger p-button-text" (click)="removeRow(i)" type="button"></button>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>

    <div class="input-group">
      <div style="
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
          margin-top: 1rem;
          margin-bottom: 1rem;
        ">
        <div style="display: flex; gap: 0.5rem; align-items: center">
          <label for="registeredOffice" scope="col">7) Address & Communication Details <span>*</span></label>
          <div pTooltip="Enter details" tooltipPosition="right">
            <i class="pi pi-info-circle" style="font-size: 14px; color: #748297"></i>
          </div>
        </div>
        <div style="display: flex; gap: 0.5rem; align-items: center">
          <label for="registeredOffice" scope="col" class="sub-labels">7.1) Registered Address of the Applicant
            <span>*</span></label>
          <div pTooltip="Enter address" tooltipPosition="right">
            <i class="pi pi-info-circle" style="font-size: 14px; color: #748297"></i>
          </div>
        </div>
      </div>
      <div formGroupName="registeredOffice" class="input-grid">
        <div class="input-item">
          <label for="registeredFlatNum">Flat / Room / Door / Block No </label>
          <input id="registeredFlatNum" type="text" pInputText formControlName="registeredFlatNum"
            placeholder="Enter Details" [ngClass]="{
              'invalid-field': 
              formGroup.get('registeredOffice')?.errors?.['atLeastTwoFieldsRequired'] &&
              formGroup.get('registeredOffice.registeredFlatNum')?.value === '' &&
              formGroup.get('registeredOffice')?.touched
            }" />
          <div
            *ngIf="formGroup.get('registeredOffice')?.errors?.['atLeastTwoFieldsRequired'] && formGroup.get('registeredOffice')?.touched"
            class="error-message">
            Please fill at least 2 of Flat No, Building Name, Road Name, Area
            Name.
          </div>
        </div>
        <div class="input-item">
          <label for="registeredBuildingName">Name of Premises/Building/Village</label>
          <input id="registeredBuildingName" type="text" pInputText formControlName="registeredBuildingName"
            placeholder="Enter Name of Premises/Building" [ngClass]="{
              'invalid-field': 
              formGroup.get('registeredOffice')?.errors?.['atLeastTwoFieldsRequired'] &&
              formGroup.get('registeredOffice.registeredBuildingName')?.value === '' &&
              formGroup.get('registeredOffice')?.touched
            }" />
          <div
            *ngIf="formGroup.get('registeredOffice')?.errors?.['atLeastTwoFieldsRequired'] && formGroup.get('registeredOffice')?.touched"
            class="error-message">
            Please fill at least 2 of Flat No, Building Name, Road Name, Area
            Name.
          </div>
        </div>
        <div class="input-item">
          <label for="registeredRoadName">Road / Street / Lane / Post Office</label>
          <input id="registeredRoadName" type="text" pInputText formControlName="registeredRoadName"
            placeholder="Enter Details" [ngClass]="{
              'invalid-field': 
              formGroup.get('registeredOffice')?.errors?.['atLeastTwoFieldsRequired'] &&
              formGroup.get('registeredOffice.registeredRoadName')?.value === '' &&
              formGroup.get('registeredOffice')?.touched
            }" />
          <div
            *ngIf="formGroup.get('registeredOffice')?.errors?.['atLeastTwoFieldsRequired'] && formGroup.get('registeredOffice')?.touched"
            class="error-message">
            Please fill at least 2 of Flat No, Building Name, Road Name, Area
            Name.
          </div>
        </div>
      </div>

      <div formGroupName="registeredOffice" class="input-grid">
        <div class="input-item">
          <label for="registeredAreaName">Area / Locality / Taluka/ Sub-Division</label>
          <input id="registeredAreaName" type="text" pInputText formControlName="registeredAreaName"
            placeholder="Enter Details" [ngClass]="{
              'invalid-field': 
              formGroup.get('registeredOffice')?.errors?.['atLeastTwoFieldsRequired'] &&
              formGroup.get('registeredOffice.registeredAreaName')?.value === '' &&
              formGroup.get('registeredOffice')?.touched
            }" />
          <div
            *ngIf="formGroup.get('registeredOffice')?.errors?.['atLeastTwoFieldsRequired'] && formGroup.get('registeredOffice')?.touched"
            class="error-message">
            Please fill at least 2 of Flat No, Building Name, Road Name, Area
            Name.
          </div>
        </div>
        <div class="input-item">
          <label for="registeredTownName">Town / City / District <span>*</span></label>
          <input id="registeredTownName" type="text" pInputText formControlName="registeredTownName"
            placeholder="Enter Town/City/District" [ngClass]="{
              'invalid-field':
                formGroup.get('registeredOffice.registeredTownName')?.invalid &&
                formGroup.get('registeredOffice.registeredTownName')?.touched
            }" />
          <div *ngIf="
              formGroup.get('registeredOffice.registeredTownName')?.invalid &&
              formGroup.get('registeredOffice.registeredTownName')?.touched
            " class="error-message">
            Town / City / District is required.
          </div>
        </div>
        <div class="input-item">
          <label for="registeredStateName">State</label>
          <input id="registeredStateName" type="text" pInputText formControlName="registeredStateName"
            placeholder="Enter State" [ngClass]="{
              'invalid-field':
                formGroup.get('registeredOffice.registeredStateName')
                  ?.invalid &&
                formGroup.get('registeredOffice.registeredStateName')?.touched
            }" />
          <div *ngIf="
              formGroup.get('registeredOffice.registeredStateName')?.invalid &&
              formGroup.get('registeredOffice.registeredStateName')?.touched
            " class="error-message">
            State is required.
          </div>
        </div>
      </div>

      <div formGroupName="registeredOffice" class="input-grid">
        <div class="input-item">
          <label for="registeredCountryName">Country Name <span>*</span></label>
          <p-select id="registeredCountryName" formControlName="registeredCountryName" placeholder="Select Country Name"
            [options]="countries" optionLabel="name" [filterBy]="'name'" class="full-width" [filter]="true"
            [showClear]="true" appendTo="body" [ngClass]="{
              'invalid-field':
                formGroup.get('registeredOffice.registeredCountryName')
                  ?.invalid &&
                formGroup.get('registeredOffice.registeredCountryName')?.touched
            }"></p-select>
          <div *ngIf="
              formGroup.get('registeredOffice.registeredCountryName')
                ?.invalid &&
              formGroup.get('registeredOffice.registeredCountryName')?.touched
            " class="error-message">
            Country is required.
          </div>
        </div>
        <div class="input-item">
          <label for="registeredZipName">Zip Code <span>*</span></label>
          <input id="registeredZipName" type="text" pInputText formControlName="registeredZipName"
            placeholder="Enter Zip Code" [ngClass]="{
              'invalid-field':
                formGroup.get('registeredOffice.registeredZipName')?.invalid &&
                formGroup.get('registeredOffice.registeredZipName')?.touched
            }" />
          <div *ngIf="
              formGroup.get('registeredOffice.registeredZipName')?.invalid &&
              formGroup.get('registeredOffice.registeredZipName')?.touched
            " class="error-message">
            Zip code is required.
          </div>
        </div>
        <div class="not-applicable">
          <p-check-box [value]="true" binary="true" inputId="notApplicableResidence"
            formControlName="notApplicableResidence"></p-check-box>
          <label for="notApplicableResidence" class="sub-labels">Not applicable?</label>
        </div>
      </div>

      <div class="address-text" style="margin-bottom: 1rem">
        <div style="display: flex; gap: 0.5rem; align-items: center">
          <label for="foreignOffice" scope="col" class="sub-labels">7.2) Office Address of the Applicant</label>
          <div pTooltip="Enter Office Details" tooltipPosition="right">
            <i class="pi pi-info-circle" style="font-size: 14px; color: #748297"></i>
          </div>
        </div>
        <p-checkbox formControlName="sameAsAbove" inputId="sameAsAbove" [binary]="true"></p-checkbox>
        <label for="sameAsAbove" class="ml-2">Same as residence address</label>
      </div>

      <div formGroupName="foreignOffice" class="input-grid">
        <div class="input-item">
          <label for="foreignFlatNum">Flat / Room / Door / Block No </label>
          <input id="foreignFlatNum" type="text" pInputText formControlName="foreignFlatNum" placeholder="Enter Details"
            [ngClass]="{
              'invalid-field': 
              formGroup.get('foreignOffice')?.errors?.['atLeastTwoFieldsRequiredF'] &&
              formGroup.get('foreignOffice.foreignFlatNum')?.value === '' &&
              formGroup.get('foreignOffice')?.touched
            }" [readonly]="formGroup.get('sameAsAbove')?.value" />

          <div
            *ngIf="formGroup.get('foreignOffice')?.errors?.['atLeastTwoFieldsRequiredF'] && formGroup.get('foreignOffice')?.touched"
            class="error-message">
            Please fill at least 2 of Flat No, Building Name, Road Name, Area
            Name.
          </div>
        </div>
        <div class="input-item">
          <label for="foreignBuildingName">Name of Premises/Building/Village</label>
          <input id="foreignBuildingName" type="text" pInputText formControlName="foreignBuildingName"
            placeholder="Enter Name of Premises/Building" [ngClass]="{
              'invalid-field': 
              formGroup.get('foreignOffice')?.errors?.['atLeastTwoFieldsRequiredF'] &&
              formGroup.get('foreignOffice.foreignBuildingName')?.value === '' &&
              formGroup.get('foreignOffice')?.touched
            }" [readonly]="formGroup.get('sameAsAbove')?.value" />
          <div
            *ngIf="formGroup.get('foreignOffice')?.errors?.['atLeastTwoFieldsRequiredF'] && formGroup.get('foreignOffice')?.touched"
            class="error-message">
            Please fill at least 2 of Flat No, Building Name, Road Name, Area
            Name.
          </div>
        </div>
        <div class="input-item">
          <label for="foreignRoadName">Road / Street / Lane / Post Office</label>
          <input id="foreignRoadName" type="text" pInputText formControlName="foreignRoadName"
            placeholder="Enter Details" [ngClass]="{
              'invalid-field': 
              formGroup.get('foreignOffice')?.errors?.['atLeastTwoFieldsRequiredF'] &&
              formGroup.get('foreignOffice.foreignRoadName')?.value === '' &&
              formGroup.get('foreignOffice')?.touched
            }" [readonly]="formGroup.get('sameAsAbove')?.value" />
          <div
            *ngIf="formGroup.get('foreignOffice')?.errors?.['atLeastTwoFieldsRequiredF'] && formGroup.get('foreignOffice')?.touched"
            class="error-message">
            Please fill at least 2 of Flat No, Building Name, Road Name, Area
            Name.
          </div>
        </div>
      </div>

      <div formGroupName="foreignOffice" class="input-grid">
        <div class="input-item">
          <label for="foreignAreaName">Area / Locality / Taluka / Sub-Division</label>
          <input id="foreignAreaName" type="text" pInputText formControlName="foreignAreaName"
            placeholder="Enter Details" [ngClass]="{
              'invalid-field': 
              formGroup.get('foreignOffice')?.errors?.['atLeastTwoFieldsRequiredF'] &&
              formGroup.get('foreignOffice.foreignAreaName')?.value === '' &&
              formGroup.get('foreignOffice')?.touched
            }" [readonly]="formGroup.get('sameAsAbove')?.value" />
          <div
            *ngIf="formGroup.get('foreignOffice')?.errors?.['atLeastTwoFieldsRequiredF'] && formGroup.get('foreignOffice')?.touched"
            class="error-message">
            Please fill at least 2 of Flat No, Building Name, Road Name, Area
            Name.
          </div>
        </div>
        <div class="input-item">
          <label for="foreignTownName">Town / City / District <span>*</span></label>
          <input id="foreignTownName" type="text" pInputText formControlName="foreignTownName"
            placeholder="Enter Town/City/District" [ngClass]="{
              'invalid-field':
                formGroup.get('foreignOffice.foreignTownName')?.invalid &&
                formGroup.get('foreignOffice.foreignTownName')?.touched
            }" [readonly]="formGroup.get('sameAsAbove')?.value" />
          <div *ngIf="
              formGroup.get('foreignOffice.foreignTownName')?.invalid &&
              formGroup.get('foreignOffice.foreignTownName')?.touched
            " class="error-message">
            Zip code is required.
          </div>
        </div>
        <div class="input-item">
          <label for="foreignStateName">State </label>
          <input id="foreignStateName" type="text" pInputText formControlName="foreignStateName"
            placeholder="Enter State" [ngClass]="{
              'invalid-field':
                formGroup.get('foreignOffice.foreignStateName')?.invalid &&
                formGroup.get('foreignOffice.foreignStateName')?.touched
            }" [readonly]="formGroup.get('sameAsAbove')?.value"
            [ngClass]="{ 'readonly-style': formGroup.get('sameAsAbove')?.value }" />
          <div *ngIf="
              formGroup.get('foreignOffice.foreignStateName')?.invalid &&
              formGroup.get('foreignOffice.foreignStateName')?.touched
            " class="error-message">
            Zip code is required.
          </div>
        </div>
      </div>

      <div formGroupName="foreignOffice" class="input-grid">
        <div class="input-item">
          <label for="foreignCountryName">Country Name <span>*</span></label>
          <p-select id="foreignCountryName" formControlName="foreignCountryName" placeholder="Select Country Name"
            [options]="countries" optionLabel="name" [filterBy]="'name'" class="full-width" [filter]="true"
            [showClear]="true" appendTo="body" [ngClass]="{
              'invalid-field':
                formGroup.get('foreignOffice.foreignCountryName')?.invalid &&
                formGroup.get('foreignOffice.foreignCountryName')?.touched
            }" [readonly]="formGroup.get('sameAsAbove')?.value"
            [ngClass]="{ 'readonly-style': formGroup.get('sameAsAbove')?.value }"></p-select>
          <div *ngIf="
              formGroup.get('foreignOffice.foreignCountryName')?.invalid &&
              formGroup.get('foreignOffice.foreignCountryName')?.touched
            " class="error-message">
            Zip code is required.
          </div>
        </div>
        <div class="input-item">
          <label for="foreignZipName">Zip Code <span>*</span></label>
          <input id="foreignZipName" type="text" pInputText formControlName="foreignZipName"
            placeholder="Enter Zip Code" [disabled]="formGroup.get('notApplicableForeignOffice')?.value" [ngClass]="{
              'invalid-field':
                formGroup.get('foreignOffice.foreignZipName')?.invalid &&
                formGroup.get('foreignOffice.foreignZipName')?.touched
            }" [readonly]="formGroup.get('sameAsAbove')?.value &&
            formGroup.get('foreignOffice.notApplicableForeignOffice')?.value"
            [ngClass]="{ 'readonly-style': formGroup.get('sameAsAbove')?.value }" />
          <div *ngIf="
              formGroup.get('foreignOffice.foreignZipName')?.invalid &&
              formGroup.get('foreignOffice.foreignZipName')?.touched
            " class="error-message">
            Zip code is required.
          </div>
        </div>
        <div class="not-applicable">
          <p-check-box [value]="true" binary="true" inputId="notApplicableForeignOffice"
            formControlName="notApplicableForeignOffice" [readonly]="formGroup.get('sameAsAbove')?.value"
            [ngClass]="{ 'readonly-style': formGroup.get('sameAsAbove')?.value }"></p-check-box>
          <label for="notApplicableForeignOffice" class="sub-labels">Not applicable?</label>
        </div>
      </div>

      <div class="office">
        <div style="display: flex; gap: 3rem; align-items: center">
          <div style="display: flex; gap: 0.5rem; align-items: center">
            <label for="OfficeInIndiaRadio" class="sub-labels">7.2.1) Do You Have Office in India?</label>
            <div pTooltip="Select yes or no" tooltipPosition="right">
              <i class="pi pi-info-circle" style="font-size: 14px; color: #748297"></i>
            </div>
          </div>
          <div formGroupName="OfficeInIndia" style="display: flex; gap: 2rem">
            <div style="display: flex; align-items: center">
              <p-radioButton [value]="true" formControlName="OfficeInIndiaRadio"
                inputId="officeInIndiaYes"></p-radioButton>
              <label for="officeInIndiaYes" class="sub-labels" style="margin-left: 1rem">Yes</label>
            </div>
            <div style="display: flex; align-items: center">
              <p-radioButton [value]="false" formControlName="OfficeInIndiaRadio"
                inputId="officeInIndiaNo"></p-radioButton>
              <label for="officeInIndiaNo" class="sub-labels" style="margin-left: 1rem">No</label>
            </div>
          </div>
        </div>
      </div>

      <div formGroupName="OfficeInIndia" *ngIf="
          formGroup.get('OfficeInIndia.OfficeInIndiaRadio')?.value === true
        ">
        <div class="address-text" style="margin-bottom: 1rem">
          <div style="display: flex; gap: 0.5rem; align-items: center">
            <label for="indianFlatNum" scope="col" class="sub-labels">7.2.1) Indian Office Address of the
              Applicant</label>
            <div pTooltip="Enter office address" tooltipPosition="right">
              <i class="pi pi-info-circle" style="font-size: 14px; color: #748297"></i>
            </div>
          </div>
        </div>
        <div class="input-grid">
          <div class="input-item">
            <label for="indianFlatNum">Flat / Room / Door / Block No </label>
            <input id="indianFlatNum" type="text" pInputText formControlName="indianFlatNum" placeholder="Enter Details"
              [ngClass]="{
                'invalid-field': 
                formGroup.get('OfficeInIndia')?.errors?.['atLeastTwoFieldsRequiredI'] &&
                formGroup.get('OfficeInIndia.indianFlatNum')?.value === '' &&
                formGroup.get('OfficeInIndia')?.touched
              }" />
            <div
              *ngIf="formGroup.get('OfficeInIndia')?.errors?.['atLeastTwoFieldsRequiredI'] && formGroup.get('OfficeInIndia')?.touched"
              class="error-message">
              Please fill at least 2 of Flat No, Building Name, Road Name, Area
              Name.
            </div>
          </div>
          <div class="input-item">
            <label for="indianBuildingName">Name of Premises/Building/Village</label>
            <input id="indianBuildingName" type="text" pInputText formControlName="indianBuildingName"
              placeholder="Enter Name of Premises/Building" [ngClass]="{
                'invalid-field': 
                formGroup.get('OfficeInIndia')?.errors?.['atLeastTwoFieldsRequiredI'] &&
                formGroup.get('OfficeInIndia.indianBuildingName')?.value === '' &&
                formGroup.get('OfficeInIndia')?.touched
              }" />
            <div
              *ngIf="formGroup.get('OfficeInIndia')?.errors?.['atLeastTwoFieldsRequiredI'] && formGroup.get('OfficeInIndia')?.touched"
              class="error-message">
              Please fill at least 2 of Flat No, Building Name, Road Name, Area
              Name.
            </div>
          </div>
          <div class="input-item">
            <label for="indianRoadName">Road / Street / Lane / Post Office</label>
            <input id="indianRoadName" type="text" pInputText formControlName="indianRoadName"
              placeholder="Enter Details" [ngClass]="{
                'invalid-field': 
                formGroup.get('OfficeInIndia')?.errors?.['atLeastTwoFieldsRequiredI'] &&
                formGroup.get('OfficeInIndia.indianRoadName')?.value === '' &&
                formGroup.get('OfficeInIndia')?.touched
              }" />
            <div
              *ngIf="formGroup.get('OfficeInIndia')?.errors?.['atLeastTwoFieldsRequiredI'] && formGroup.get('OfficeInIndia')?.touched"
              class="error-message">
              Please fill at least 2 of Flat No, Building Name, Road Name, Area
              Name.
            </div>
          </div>
        </div>

        <div class="input-grid">
          <div class="input-item">
            <label for="indianAreaName">Area / Locality / Taluka / Sub-Division</label>
            <input id="indianAreaName" type="text" pInputText formControlName="indianAreaName"
              placeholder="Enter Details" [ngClass]="{
                'invalid-field': 
                formGroup.get('OfficeInIndia')?.errors?.['atLeastTwoFieldsRequiredI'] &&
                formGroup.get('OfficeInIndia.indianAreaName')?.value === '' &&
                formGroup.get('OfficeInIndia')?.touched
              }" />
            <div
              *ngIf="formGroup.get('OfficeInIndia')?.errors?.['atLeastTwoFieldsRequiredI'] && formGroup.get('OfficeInIndia')?.touched"
              class="error-message">
              Please fill at least 2 of Flat No, Building Name, Road Name, Area
              Name.
            </div>
          </div>
          <div class="input-item">
            <label for="indianTownName">Town / City / District <span>*</span></label>
            <input id="indianTownName" type="text" pInputText formControlName="indianTownName"
              placeholder="Enter Town/City/District" [ngClass]="{
                'invalid-field':
                  formGroup.get('OfficeInIndia.indianTownName')?.invalid &&
                  formGroup.get('OfficeInIndia.indianTownName')?.touched
              }" />
            <div *ngIf="
                formGroup.get('OfficeInIndia.indianTownName')?.invalid &&
                formGroup.get('OfficeInIndia.indianTownName')?.touched
              " class="error-message">
              Please enter Town/City/District.
            </div>
          </div>
          <div class="input-item">
            <label for="indianStateName">State <span>*</span></label>
            <input id="indianStateName" type="text" pInputText formControlName="indianStateName"
              placeholder="Enter State" [ngClass]="{
                'invalid-field':
                  formGroup.get('OfficeInIndia.indianStateName')?.invalid &&
                  formGroup.get('OfficeInIndia.indianStateName')?.touched
              }" />
            <div *ngIf="
                formGroup.get('OfficeInIndia.indianStateName')?.invalid &&
                formGroup.get('OfficeInIndia.indianStateName')?.touched
              " class="error-message">
              Please enter state name for india address.
            </div>
          </div>
        </div>

        <div class="input-grid">
          <div class="input-item">
            <label for="indianCountryName">Country Name <span>*</span></label>
            <p-select id="indianCountryName" formControlName="indianCountryName" placeholder="Select Country Name"
              [options]="countries" optionLabel="name" [filterBy]="'name'" class="full-width" [filter]="true"
              [showClear]="true" appendTo="body" [ngClass]="{
                'invalid-field':
                  formGroup.get('OfficeInIndia.indianCountryName')?.invalid &&
                  formGroup.get('OfficeInIndia.indianCountryName')?.touched
              }"></p-select>
            <div *ngIf="
                formGroup.get('OfficeInIndia.indianCountryName')?.invalid &&
                formGroup.get('OfficeInIndia.indianCountryName')?.touched
              " class="error-message">
              Please select country.
            </div>
          </div>
          <div class="input-item">
            <label for="indianZipName">Pan Code <span>*</span></label>
            <input id="indianZipName" type="text" pInputText formControlName="indianZipName"
              placeholder="Enter Pan Code" [disabled]="
                formGroup.get('OfficeInIndia.notApplicableIndOffice')?.value
              " [ngClass]="{
                'invalid-field':
                  formGroup.get('OfficeInIndia.indianZipName')?.invalid &&
                  formGroup.get('OfficeInIndia.indianZipName')?.touched
              }" maxlength="6" (keypress)="allowNumberOnly($event)"/>
            <div *ngIf="
                formGroup.get('OfficeInIndia.indianZipName')?.invalid &&
                formGroup.get('OfficeInIndia.indianZipName')?.touched
              " class="error-message">
              Zip code is required.
            </div>
          </div>
          <div class="not-applicable">
            <p-check-box [value]="true" binary="true" inputId="notApplicableIndOffice"
              formControlName="notApplicableIndOffice"></p-check-box>
            <label for="notApplicableIndOffice" class="sub-labels">Not applicable?</label>
          </div>
        </div>
      </div>

      <div style="
          display: flex;
          flex-direction: column;
          gap: 2rem;
          margin-bottom: 2rem;
        ">
        <div style="display: flex; gap: 0.5rem; align-items: center">
          <label for="communicationAddress" scope="col" class="sub-labels">7.3) Address of Communication/Correspondence
            <span>*</span></label>
          <div pTooltip="Select the address of communication" tooltipPosition="right">
            <i class="pi pi-info-circle" style="font-size: 14px; color: #748297"></i>
          </div>
          <div *ngIf="
              formGroup.get('communicationAddress')?.invalid &&
              formGroup.get('communicationAddress')?.touched
            " class="error-message">
            Please select the Address of Communication.
          </div>
        </div>
        <div style="display: flex; gap: 3rem; align-items: center">
          <div class="radio">
            <p-radioButton value="registered" formControlName="communicationAddress"
              inputId="registeredAddress"></p-radioButton>
            <label for="registeredAddress" class="sub-labels">Registered
            </label>
          </div>
          <div class="radio">
            <p-radioButton value="foreign" formControlName="communicationAddress"
              inputId="foreignAddress"></p-radioButton>
            <label for="foreignAddress" class="sub-labels">Office Address (Foreign)</label>
          </div>
          <div class="radio" *ngIf="
              formGroup.get('OfficeInIndia.OfficeInIndiaRadio')?.value === true
            ">
            <p-radioButton value="indian" formControlName="communicationAddress"
              inputId="indianAddress"></p-radioButton>
            <label for="indianAddress" class="sub-labels">Office Address (India)</label>
          </div>
          <br />
        </div>
      </div>
    </div>

    <div class="input-group">
      <div style="display: flex; gap: 0.5rem; align-items: center">
        <label for="contactDetails" scope="col" class="sub-labels">7.4) Contact Details</label>
        <div pTooltip="Enter contact details" tooltipPosition="right">
          <i class="pi pi-info-circle" style="font-size: 14px; color: #748297"></i>
        </div>
      </div>
      <p-table showGridlines [value]="contactData" [responsiveLayout]="'scroll'" class="p-datatable-striped">
        <ng-template pTemplate="header">
          <tr>
            <th scope="col">Sr. No</th>
            <th scope="col" class="sub-labels">Particulars</th>
            <th scope="col" class="sub-labels">Type</th>
            <th scope="col">Country Code</th>
            <th scope="col">Area/STD Code</th>
            <th scope="col">Number</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-item>
          <!-- Telephone Number Section -->
          <!-- Registered Address Row -->
          <tr formGroupName="contactDetails">
            <td [attr.rowspan]="
                formGroup.get('OfficeInIndia.OfficeInIndiaRadio')?.value ===
                true
                  ? 3
                  : 2
              ">
              a)
            </td>
            <td [attr.rowspan]="
                formGroup.get('OfficeInIndia.OfficeInIndiaRadio')?.value ===
                true
                  ? 3
                  : 2
              ">
              Telephone Number
            </td>
            <td>Registered Address</td>
            <td formGroupName="registered">
              <p-select id="registeredCountryCode" formControlName="countryCode" placeholder="Enter Country Code"
                [options]="countries_pan" optionLabel="code" [filterBy]="'code'" class="full-width" [filter]="true"
                [showClear]="true" appendTo="body" [ngClass]="{
                  'invalid-field':
                    formGroup.get('contactDetails.registered.countryCode')?.invalid &&
                    formGroup.get('contactDetails.registered.countryCode')?.touched
                }"></p-select>
              <!-- <div *ngIf="
                  formGroup.get('contactDetails.registered.countryCode')?.invalid &&
                  formGroup.get('contactDetails.registered.countryCode')?.touched
                " class="error-message">
                Country Code for registered address is required.
              </div> -->
            </td>
            <td formGroupName="registered">
              <input id="registeredAreaCode" type="text" pInputText placeholder="Enter Area Code"
                formControlName="areaCode" maxlength="5" [ngClass]="{
                  'invalid-field':
                    formGroup.get('contactDetails.registered.areaCode')?.invalid &&
                    formGroup.get('contactDetails.registered.areaCode')?.touched
                }" />
              <!-- <div *ngIf="
                  formGroup.get('contactDetails.registered.areaCode')
                    ?.invalid &&
                  formGroup.get('contactDetails.registered.areaCode')
                    ?.touched
                " class="error-message">
                Area Code for registered address is required.
              </div> -->
            </td>
            <td formGroupName="registered">
              <input id="registeredNumber" type="text" pInputText placeholder="Enter Number" formControlName="number"
                maxlength="15" [ngClass]="{
                  'invalid-field':
                    formGroup.get('contactDetails.registered.number')?.invalid &&
                    formGroup.get('contactDetails.registered.number')?.touched
                }" (keypress)="allowNumberOnly($event)"/>
              <!-- <div *ngIf="
                  formGroup.get('contactDetails.registered.number')?.invalid &&
                  formGroup.get('contactDetails.registered.number')?.touched
                " class="error-message">
                Phone Number for registered address is required.
              </div> -->
            </td>
          </tr>

          <!-- Office Address Row -->
          <tr formGroupName="contactDetails">
            <td>Office Address</td>
            <td formGroupName="office">
              <p-select id="officeCountryCode" formControlName="countryCode" placeholder="Enter Country Code"
                [options]="countryCodes_pan" optionLabel="code" [filterBy]="'code'" class="full-width" [filter]="true"
                [showClear]="true" appendTo="body" [ngClass]="{
                  'invalid-field':
                    formGroup.get('contactDetails.office.countryCode')?.invalid &&
                    formGroup.get('contactDetails.office.countryCode')?.touched
                }"></p-select>
            </td>
            <td formGroupName="office">
              <input id="officeAreaCode" type="text" pInputText placeholder="Enter Area Code" formControlName="areaCode"
                maxlength="5" [ngClass]="{
                  'invalid-field':
                    formGroup.get('contactDetails.office.areaCode')?.invalid &&
                    formGroup.get('contactDetails.office.areaCode')?.touched
                }" />
            </td>
            <td formGroupName="office">
              <input id="officeNumber" type="text" pInputText placeholder="Enter Number" formControlName="number"
                maxlength="15" [ngClass]="{
                  'invalid-field':
                    formGroup.get('contactDetails.office.number')?.invalid &&
                    formGroup.get('contactDetails.office.number')?.touched
                }" (keypress)="allowNumberOnly($event)"/>
            </td>
          </tr>

          <!-- Indian Office Address Row - Only shown if OfficeInIndiaRadio is true -->
          <tr formGroupName="contactDetails" *ngIf="
              formGroup.get('OfficeInIndia.OfficeInIndiaRadio')?.value === true
            ">
            <td>Indian Office Address</td>
            <td formGroupName="indianOffice">
              <p-select id="indianCountryCode" formControlName="countryCode" placeholder="Enter Country Code"
                [options]="countryCodes" optionLabel="code" [filterBy]="'code'" class="full-width" [filter]="true"
                [showClear]="true" appendTo="body" [ngClass]="{
                  'invalid-field':
                    formGroup.get('contactDetails.indianOffice.countryCode')?.invalid &&
                    formGroup.get('contactDetails.indianOffice.countryCode')?.touched
                }"></p-select>
            </td>
            <td formGroupName="indianOffice">
              <input id="indianAreaCode" type="text" pInputText placeholder="Enter Area Code" formControlName="areaCode"
                maxlength="5" [ngClass]="{
                  'invalid-field':
                    formGroup.get('contactDetails.indianOffice.areaCode')?.invalid &&
                    formGroup.get('contactDetails.indianOffice.areaCode')?.touched
                }" />
            </td>
            <td formGroupName="indianOffice">
              <input id="indianNumber" type="text" pInputText placeholder="Enter Number" formControlName="number"
                maxlength="15" [ngClass]="{
                  'invalid-field':
                    formGroup.get('contactDetails.indianOffice.number')?.invalid &&
                    formGroup.get('contactDetails.indianOffice.number')?.touched
                }" (keypress)="allowNumberOnly($event)"/>
            </td>
          </tr>

          <!-- Fax Number Section -->
          <!-- Registered Address Row -->
          <tr formGroupName="contactDetails">
            <td [attr.rowspan]="
                formGroup.get('OfficeInIndia.OfficeInIndiaRadio')?.value ===
                true
                  ? 3
                  : 2
              ">
              b)
            </td>
            <td [attr.rowspan]="
                formGroup.get('OfficeInIndia.OfficeInIndiaRadio')?.value ===
                true
                  ? 3
                  : 2
              ">
              Fax Number
            </td>
            <td>Registered Address</td>
            <td formGroupName="registeredFax">
              <p-select id="registeredFaxCountryCode" formControlName="countryCode" placeholder="Enter Country Code"
                [options]="countryCodes" optionLabel="code" [filterBy]="'code'" class="full-width" [filter]="true"
                [showClear]="true" appendTo="body"></p-select>
            </td>
            <td formGroupName="registeredFax">
              <input id="registeredFaxAreaCode" type="text" pInputText placeholder="Enter Area Code"
                formControlName="areaCode" maxlength="5" />
            </td>
            <td formGroupName="registeredFax">
              <input id="registeredFaxNumber" type="text" pInputText placeholder="Enter Number" formControlName="number"
                maxlength="15" (keypress)="allowNumberOnly($event)"/>
            </td>
          </tr>

          <!-- Office Address Row -->
          <tr formGroupName="contactDetails">
            <td>Office Address</td>
            <td formGroupName="officeFax">
              <p-select id="officeFaxCountryCode" formControlName="countryCode" placeholder="Enter Country Code"
                [options]="countryCodes" optionLabel="code" [filterBy]="'code'" class="full-width" [filter]="true"
                [showClear]="true" appendTo="body"></p-select>
            </td>
            <td formGroupName="officeFax">
              <input id="officeFaxAreaCode" type="text" pInputText placeholder="Enter Area Code"
                formControlName="areaCode" maxlength="5" />
            </td>
            <td formGroupName="officeFax">
              <input id="officeFaxNumber" type="text" pInputText placeholder="Enter Number" formControlName="number"
                maxlength="15" (keypress)="allowNumberOnly($event)"/>
            </td>
          </tr>

          <!-- Indian Office Address Row - Only shown if OfficeInIndiaRadio is true -->
          <tr formGroupName="contactDetails" *ngIf="
              formGroup.get('OfficeInIndia.OfficeInIndiaRadio')?.value === true
            ">
            <td>Indian Office Address</td>
            <td formGroupName="indianOfficeFax">
              <p-select id="indianFaxCountryCode" formControlName="countryCode" placeholder="Enter Country Code"
                [options]="countryCodes" optionLabel="code" [filterBy]="'code'" class="full-width" [filter]="true"
                [showClear]="true" appendTo="body"></p-select>
            </td>
            <td formGroupName="indianOfficeFax">
              <input id="indianFaxAreaCode" type="text" pInputText placeholder="Enter Area Code"
                formControlName="areaCode" maxlength="5" />
            </td>
            <td formGroupName="indianOfficeFax">
              <input id="indianFaxNumber" type="text" pInputText placeholder="Enter Number" formControlName="number"
                maxlength="15" (keypress)="allowNumberOnly($event)"/>
            </td>
          </tr>

          <!-- Mobile Number Row -->
          <tr formGroupName="contactDetails">
            <td>c)</td>
            <td>Mobile Number <span>*</span></td>
            <td colspan="4">
              <input id="mobileNumber" type="text" pInputText placeholder="Enter Mobile Number"
                formControlName="mobileNumber" class="full-width" maxlength="15" [ngClass]="{
                  'invalid-field':
                    formGroup.get('contactDetails.mobileNumber')?.invalid && formGroup.get('contactDetails.mobileNumber')?.touched
                }" (keypress)="allowNumberOnly($event)"/>
              <div *ngIf="
                  formGroup.get('contactDetails.mobileNumber')
                    ?.invalid &&
                  formGroup.get('contactDetails.mobileNumber')
                    ?.touched
                " class="error-message">
                Please enter valid mobile number.
              </div>
            </td>
          </tr>

          <!-- Email ID Row -->
          <tr formGroupName="contactDetails">
            <td>d)</td>
            <td>Email ID <span>*</span></td>
            <td colspan="4">
              <input id="emailId" type="email" pInputText placeholder="Enter Email ID" formControlName="emailId"
                class="full-width" [ngClass]="{
                  'invalid-field':
                    formGroup.get('contactDetails.emailId')?.invalid && formGroup.get('contactDetails.emailId')?.touched
                }" />
              <div *ngIf="
                  formGroup.get('contactDetails.emailId')
                    ?.invalid &&
                  formGroup.get('contactDetails.emailId')
                    ?.touched
                " class="error-message">
                Please enter valid email id.
              </div>
            </td>
          </tr>

          <!-- Website Row -->
          <tr formGroupName="contactDetails">
            <td>e)</td>
            <td>Website <span>*</span></td>
            <td colspan="4">
              <input id="website" type="text" pInputText placeholder="Enter Website" formControlName="website"
                class="full-width" [ngClass]="{
                  'invalid-field':
                    formGroup.get('contactDetails.website')?.invalid && formGroup.get('contactDetails.website')?.touched
                }" />
              <div *ngIf="
                  formGroup.get('contactDetails.website')
                    ?.invalid &&
                  formGroup.get('contactDetails.website')
                    ?.touched
                " class="error-message">
                Please enter valid website.
              </div>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>

    <div class="input-group">
      <div style="display: flex; gap: 0.5rem; align-items: center">
        <label for="complianceOfficerSection">
          8) Information Pertaining To Investment Manager
          <span>*</span>
        </label>
        <div pTooltip="Information Pertaining To Investment Manager" tooltipPosition="right">
          <i class="pi pi-info-circle" style="font-size: 14px; color: #748297"></i>
        </div>
      </div>
      <div id="investmentManagerSection" class="input-grid-2" formGroupName="investmentManager">
        <div class="input-item">
          <label for="investmentManagerName" class="sub-labels">Name <span>*</span></label>
          <input type="text" id="investmentManagerName" formControlName="nameOfEntity" pInputText
            placeholder="Enter Name" [ngClass]="{
              'invalid-field':
                formGroup.get('investmentManager.nameOfEntity')?.invalid && formGroup.get('investmentManager.nameOfEntity')?.touched
            }" />
          <div *ngIf="
              formGroup.get('investmentManager.nameOfEntity')?.invalid &&
              formGroup.get('investmentManager.nameOfEntity')?.touched
            " class="error">
            This field is required.
          </div>
        </div>
        <div class="input-item">
          <label for="investmentManagerTypeOfEntity" class="sub-labels">Job Title <span>*</span></label>
          <input type="text" id="investmentManagerTypeOfEntity" formControlName="typeOfEntity" pInputText
            placeholder="Enter type Of Entity" [ngClass]="{
              'invalid-field':
                formGroup.get('investmentManager.typeOfEntity')?.invalid && formGroup.get('investmentManager.typeOfEntity')?.touched
            }" />
          <div *ngIf="
              formGroup.get('investmentManager.typeOfEntity')?.invalid &&
              formGroup.get('investmentManager.typeOfEntity')?.touched
            " class="error">
            This field is required.
          </div>
        </div>
      </div>

      <div formGroupName="investmentManager">
        <div class="input-grid-2">
          <div class="input-item">
            <label for="investmentManagerCountry" class="sub-labels">
              Country <span>*</span>
            </label>
            <p-select id="investmentManagerCountry" formControlName="country" placeholder="Select country"
              [options]="countries" optionLabel="name" [filter]="true" [filterBy]="'name'" class="full-width"
              [showClear]="true" appendTo="body" [ngClass]="{
                                'invalid-field':
                                formGroup.get('investmentManager.country')?.invalid &&
                               formGroup.get('investmentManager.country')?.touched
                              }"></p-select>
            <div *ngIf="
                formGroup.get('investmentManager.country')?.invalid &&
                formGroup.get('investmentManager.country')?.touched
              " class="error">
              This field is required.
            </div>
          </div>
          <div class="input-item">
            <label for="investmentManagerTelephonNumber" class="sub-labels">Telephone Number <span>*</span></label>
            <input type="email" id="investmentManagerTelephonNumber" formControlName="telephoneNumber" pInputText
              [ngClass]="{
                      'invalid-field':
                        formGroup.get('inverstmentManager.telephoneNumber')?.invalid && formGroup.get('inverstmentManager.telephoneNumber')?.touched
                    }" (keypress)="allowNumberOnly($event)"/>
  
            <div *ngIf="
                      formGroup.get('inverstmentManager.telephoneNumber')?.invalid &&
                      formGroup.get('inverstmentManager.telephoneNumber')?.touched
                    " class="error">
              This field is required.
            </div>
          </div>
        </div>
      </div>
      <div formGroupName="investmentManager">
        <div class="input-grid-2" style="margin-top: 1rem">
        <div class="input-item">
          <label for="investmentManagerfaxNumber" class="sub-labels">Fax Number </label>
          <input type="text" id="investmentManagerfaxNumber" formControlName="faxNumber" pInputText
            placeholder="Enter Fax Number" [ngClass]="{
                  'invalid-field':
                    formGroup.get('investmentManager.faxNumber')?.invalid && formGroup.get('investmentManager.faxNumber')?.touched
                }" (keypress)="allowNumberOnly($event)"/>
          <div *ngIf="
                  formGroup.get('investmentManager.faxNumber')?.invalid &&
                  formGroup.get('investmentManager.faxNumber')?.touched
                " class="error">
            This field is required.
          </div>
        </div>
        <div class="input-item">
          <label for="investmentManagerEmail" class="sub-labels">Email Id <span>*</span></label>
          <input type="email" id="investmentManagerEmail" formControlName="emailId" pInputText placeholder="Enter Email"
            [ngClass]="{
                    'invalid-field':
                      formGroup.get('inverstmentManager.emailId')?.invalid && formGroup.get('inverstmentManager.emailId')?.touched
                  }" />

          <div *ngIf="
                    formGroup.get('inverstmentManager.emailId')?.invalid &&
                    formGroup.get('inverstmentManager.emailId')?.touched
                  " class="error">
            This field is required.
          </div>
        </div>
        </div>
      </div>
      <div class="input-grid-2" style="margin-top: 1rem">
        
      </div>
    </div>




<div class="input-group">
  <div style="display: flex; gap: 0.5rem; align-items: center">
    <label for="complianceOfficerSection">
      9) Information Pertaining To The Compliance Officer
      <span>*</span>
    </label>
    <div pTooltip="Provide details for the compliance officer" tooltipPosition="right">
          <i class="pi pi-info-circle" style="font-size: 14px; color: #748297"></i>
    </div>
  </div>
  <div id="complianceOfficerSection" class="input-grid-2" formGroupName="complianceOfficerInfo">
    <div class="input-item">
      <label for="complianceOfficerInfoName" class="sub-labels">Name <span>*</span></label>
      <input type="text" id="complianceOfficerInfoName" formControlName="complianceOfficerInfoName" pInputText
        placeholder="Enter Name" [ngClass]="{
              'invalid-field':
                formGroup.get('complianceOfficerInfo.complianceOfficerInfoName')?.invalid && formGroup.get('complianceOfficerInfo.complianceOfficerInfoName')?.touched
            }" />
      <div *ngIf="
              formGroup.get('complianceOfficerInfo.complianceOfficerInfoName')?.invalid &&
              formGroup.get('complianceOfficerInfo.complianceOfficerInfoName')?.touched
            " class="error">
        This field is required.
      </div>
    </div>
    <div class="input-item">
      <label for="complianceOfficerInfoJob" class="sub-labels">Job Title <span>*</span></label>
      <input type="text" id="complianceOfficerInfoJob" formControlName="complianceOfficerInfoJob" pInputText
        placeholder="Enter Job Title" [ngClass]="{
              'invalid-field':
                formGroup.get('complianceOfficerInfo.complianceOfficerInfoJob')?.invalid && formGroup.get('complianceOfficerInfo.complianceOfficerInfoJob')?.touched
            }" />
      <div *ngIf="
              formGroup.get('complianceOfficerInfo.complianceOfficerInfoJob')?.invalid &&
              formGroup.get('complianceOfficerInfo.complianceOfficerInfoJob')?.touched
            " class="error">
        This field is required.
      </div>
    </div>
  </div>

  <div formGroupName="complianceOfficerInfo">
    <div class="input-grid-2">
      <div class="input-item">
        <label for="complianceOfficerInfoMobile" class="sub-labels">
          Telephone Number <span>*</span>
        </label>
        <input type="text" id="complianceOfficerInfoMobile" pInputText [maxlength]="20"
          placeholder="Enter Telephone Number" formControlName="complianceOfficerInfoMobile" [ngClass]="{
                'invalid-field':
                  formGroup.get('complianceOfficerInfo.complianceOfficerInfoMobile')?.invalid && formGroup.get('complianceOfficerInfo.complianceOfficerInfoMobile')?.touched
              }" (keypress)="allowNumberOnly($event)"/>
        <div *ngIf="
                formGroup.get('complianceOfficerInfo.complianceOfficerInfoMobile')?.invalid &&
                formGroup.get('complianceOfficerInfo.complianceOfficerInfoMobile')?.touched
              " class="error">
          This field is required.
        </div>
      </div>
      <div class="input-item">
        <label for="complianceOfficerInfoFax" class="sub-labels">Fax Number </label>
        <input type="text" id="complianceOfficerInfoFax" formControlName="complianceOfficerInfoFax" pInputText
          placeholder="Enter Fax Number" [ngClass]="{
                'invalid-field':
                  formGroup.get('complianceOfficerInfo.complianceOfficerInfoFax')?.invalid && formGroup.get('complianceOfficerInfo.complianceOfficerInfoFax')?.touched
              }" (keypress)="allowNumberOnly($event)"/>
        <div *ngIf="
                formGroup.get('complianceOfficerInfo.complianceOfficerInfoFax')?.invalid &&
                formGroup.get('complianceOfficerInfo.complianceOfficerInfoFax')?.touched
              " class="error">
          This field is required.
        </div>
      </div>
    </div>
    <div class="input-grid-2" style="margin-top: 1rem">
      <div class="input-item">
        <label for="complianceOfficerInfoEmail" class="sub-labels">Email Id <span>*</span></label>
        <input type="email" id="complianceOfficerInfoEmail" formControlName="complianceOfficerInfoEmail" pInputText
          placeholder="Enter Email" [ngClass]="{
                'invalid-field':
                  formGroup.get('complianceOfficerInfo.complianceOfficerInfoEmail')?.invalid && formGroup.get('complianceOfficerInfo.complianceOfficerInfoEmail')?.touched
              }" />

        <div *ngIf="
                formGroup.get('complianceOfficerInfo.complianceOfficerInfoEmail')?.invalid &&
                formGroup.get('complianceOfficerInfo.complianceOfficerInfoEmail')?.touched
              " class="error">
          This field is required.
        </div>
      </div>
    </div>
  </div>
</div>

<div class="input-group">
  <label for="ultimateBeneficialOwner" scope="col">
    10) Information regarding Ultimate Beneficial Owner (End Natural Person)
    <span>*</span>
  </label>
  <div>
    <label for="ultimateBeneficialOwner" class="sub-labels">
      10.1) Individual Custodian/DDPs may seek additional
      documentation/Ownership details at a lower threshold than prescribed,
      based on their independent evaluation and risk classification of the
      respective FVCI applicants on the basis of multiple parameters such as home jurisdiction, type of entity, nature
      of business etc.
    </label>
    <div class="condition" style="display: flex; flex-direction: column; gap: 3rem">
      <div>
        <p-radioButton name="ultimateBeneficialOwner" [value]="false" formControlName="ultimateBeneficialOwner"
          inputId="ultimateBeneficialOwnerNo" [ngClass]="{
                'invalid-field':
                  formGroup.get('ultimateBeneficialOwner')?.invalid &&
                  formGroup.get('ultimateBeneficialOwner')?.touched
              }"></p-radioButton>
        <label for="ultimateBeneficialOwnerNo" class="sub-labels" style="margin-left: 1rem">
          We declare that there is no natural person/individual who are
          ultimately holding >=
          <input type="number" pInputText id="ultimateBeneficialOwnerNo" formControlName="ultimateBeneficialOwner"
            [style]="{
                  'border-top': 'none',
                  'border-left': 'none',
                  'border-right': 'none',
                  'border-bottom-right-radius': '0',
                  'border-bottom-left-radius': '0',
                  width: '60px',
                  border: '2px dashed'
                }" (input)="sanitizePercentageInput($event)"/>% beneficial ownership directly/indirectly into the equity as
          well as on controlling basis for companies, Trust & General
          Partner / Limited Partnership structure. We therefore provide
          details of the senior managing official of the FVCI as under. The
          list of beneficial owners as per materiality threshold for
          controlling ownership interest and / or on control basis is
          provided as under:
        </label>
      </div>
      <div style="display: flex; align-items: center">
        <p-radioButton name="ultimateBeneficialOwner" [value]="true" formControlName="ultimateBeneficialOwner"
          inputId="ultimateBeneficialOwnerYes" [ngClass]="{
                'invalid-field':
                  formGroup.get('ultimateBeneficialOwner')?.invalid &&
                  formGroup.get('ultimateBeneficialOwner')?.touched
              }"></p-radioButton>
        <label for="ultimateBeneficialOwnerYes" class="sub-labels" style="margin-left: 1rem">
          The list of beneficial owners as per materiality threshold is for controlling ownership intrest and / or on
          control basis is provided as under.

        </label>
      </div>
    </div>
    <div *ngIf="
            formGroup.get('ultimateBeneficialOwner')?.invalid &&
            (formGroup.get('ultimateBeneficialOwner')?.touched ||
              formGroup.touched)
          " class="error-message">
      This field is required.
    </div>
  </div>
  <div formArrayName="managingOfficialRows">
    <p-table [value]="managingOfficialRows.controls" showGridlines [responsiveLayout]="'scroll'"
      class="p-datatable-striped">
      <ng-template pTemplate="header">
        <tr>
          <th class="sub-labels">Details of the senior managing official of the FPI</th>
          <th class="sub-labels">Actions</th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-rowForm let-index="rowIndex">
        <tr [formGroupName]="index">
          <td>
            <p-accordion [(activeIndex)]="activeAccordionIndex">
              <p-accordionTab [header]="'Senior Managing Official - ' + (index + 1)">
                <table class="inner-table bordered-table" style="width: 100%">
                  <thead>
                    <tr>
                      <th class="sub-labels">Sr. No</th>
                      <th class="sub-labels">Particulars</th>
                      <th class="sub-labels">Details</th>
                    </tr>
                  </thead>
                  <tbody formGroupName="details">
                    <tr>
                      <td>1</td>
                      <td>Name & Address of the Beneficial Owner(Natural Person)<span>*</span></td>
                      <td>
                        <input pInputText formControlName="nameAndAddress" class="full-width" [ngClass]="{
                              'invalid-field':
                              rowForm.get('details')?.get('nameAndAddress')?.invalid &&
                              rowForm.get('details')?.get('nameAndAddress')?.touched
                            }" />
                        <div *ngIf="
                             rowForm.get('details')?.get('nameAndAddress')?.invalid &&
                             rowForm.get('details')?.get('nameAndAddress')?.touched
                          " class="error-message">
                          Name & Address of the Beneficial Owner field is required.
                        </div>
                      </td>
                    </tr>
                    <tr>
                      <td>2</td>
                      <td>Date of Birth <span>*</span></td>
                      <td>
                        <p-datepicker formControlName="dateOfBirth" dateFormat="dd/mm/yy" [showIcon]="true"
                          appendTo="body" class="full-width" [maxDate]="maxDate" [ngClass]="{
                                'invalid-field':
                                rowForm.get('details')?.get('dateOfBirth')?.invalid &&
                                rowForm.get('details')?.get('dateOfBirth')?.touched
                              }"></p-datepicker>
                        <div *ngIf="
                             rowForm.get('details')?.get('dateOfBirth')?.invalid &&
                             rowForm.get('details')?.get('dateOfBirth')?.touched
                          " class="error-message">
                          Date of Birth is required.
                        </div>
                      </td>
                    </tr>
                    <tr>
                      <td>3</td>
                      <td>Tax Residency Jurisdiction <span>*</span></td>
                      <td>
                        <!-- <input pInputText formControlName="taxResidencyJurisdiction" class="full-width" 
                            [ngClass]="{
                              'invalid-field':
                              rowForm.get('details')?.get('taxResidencyJurisdiction')?.invalid &&
                              rowForm.get('details')?.get('taxResidencyJurisdiction')?.touched
                            }"
                            /> -->
                        <p-select id="taxResidencyJurisdiction" formControlName="taxResidencyJurisdiction"
                          placeholder="Select country" [options]="countries" optionLabel="name" [filter]="true"
                          [filterBy]="'name'" class="full-width" [showClear]="true" appendTo="body" [ngClass]="{
                                'invalid-field':
                                rowForm.get('details')?.get('taxResidencyJurisdiction')?.invalid &&
                                rowForm.get('details')?.get('taxResidencyJurisdiction')?.touched
                              }"></p-select>
                        <div *ngIf="
                             rowForm.get('details')?.get('taxResidencyJurisdiction')?.invalid &&
                             rowForm.get('details')?.get('taxResidencyJurisdiction')?.touched
                          " class="error-message">
                          Tax Residency Jurisdiction is required.
                        </div>
                      </td>
                    </tr>
                    <tr>
                      <td>4</td>
                      <td>Nationality <span>*</span></td>
                      <td>

                        <p-select id="nationality" formControlName="nationality" placeholder="Select country"
                          [options]="countries" optionLabel="name" [filter]="true" [filterBy]="'name'"
                          class="full-width" [showClear]="true" appendTo="body" [ngClass]="{
                              'invalid-field':
                              rowForm.get('details')?.get('nationality')?.invalid &&
                            rowForm.get('details')?.get('nationality')?.touched
                            }"></p-select>
                        <div *ngIf="
                            rowForm.get('details')?.get('nationality')?.invalid &&
                            rowForm.get('details')?.get('nationality')?.touched
                         " class="error-message">
                          Nationality is required.
                        </div>
                      </td>
                    </tr>
                    <tr>
                      <td>5</td>
                      <td>Whether acting alone or together, or through one or more natural person as group with their
                        name address</td>
                      <td>
                        <input pInputText formControlName="actingAsGroupDetails" class="full-width" />
                      </td>
                    </tr>
                    <tr>
                      <td>6</td>
                      <td>benificial Owner (BO) Group Percentage Shareholding / Capital / Profit Ownership in FVCI (%)
                      </td>
                      <td>
                        <input pInputText formControlName="boGroupShareholding" class="full-width" [ngClass]="{
                              'invalid-field':
                              formGroup.get('details.boGroupShareholding')?.invalid &&
                              formGroup.get('details.boGroupShareholding')?.touched
                            }" (input)="sanitizePercentageInput($event)"/>
                      </td>
                    </tr>
                    <tr>
                      <td>7</td>
                      <td>Tax Residancy Number/ Social Security Number/ Passwort Number of BO/ any other Goverment
                        issued identity document number (example Driving Licence) [Please proviide any]</td>
                      <td>
                        <input pInputText formControlName="governmentIdNumber" class="full-width" [ngClass]="{
                              'invalid-field':
                              formGroup.get('details.governmentIdNumber')?.invalid &&
                              formGroup.get('details.governmentIdNumber')?.touched
                            }" />
                      </td>
                    </tr>
                  </tbody>
                </table>
              </p-accordionTab>
            </p-accordion>
          </td>

          <td class="text-center" style="vertical-align: top">
            <div class="action-buttons" style="display: flex; flex-direction: column; gap: 0.5rem;">
              <p-button icon="pi pi-plus" (click)="addManagingOfficialRow()" [rounded]="true"></p-button>
              <p-button icon="pi pi-trash" (click)="removeManagingOfficialRow(index)"
                [disabled]="managingOfficialRows.length === 1" [rounded]="true" severity="danger"
                pTooltip="At least one official is required" tooltipPosition="top"></p-button>
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>



  <div class="residence" style="margin-left: -0.25rem">
    <label for="beneficialOwnership" class="sub-labels">
      10.2) Does it have few persons or persons of the same family holding
      beneficial ownership and control?
    </label>
    <div>
      <div style="display: flex; gap: 2rem">
        <div style="display: flex; align-items: center">
          <p-radioButton [value]="true" formControlName="beneficialOwnership" inputId="beneficialOwnershipYes"
            [ngClass]="{
                  'invalid-field':
                    formGroup.get('beneficialOwnership')?.invalid &&
                    formGroup.get('beneficialOwnership')?.touched
                }"></p-radioButton>
          <label for="beneficialOwnershipYes" class="sub-labels" style="margin-left: 1rem">Yes</label>
        </div>
        <div style="display: flex; align-items: center">
          <p-radioButton [value]="false" formControlName="beneficialOwnership" inputId="beneficialOwnershipNo"
            [ngClass]="{
                  'invalid-field':
                    formGroup.get('beneficialOwnership')?.invalid &&
                    formGroup.get('beneficialOwnership')?.touched
                }"></p-radioButton>
          <label for="beneficialOwnershipNo" class="sub-labels" style="margin-left: 1rem">No</label>
        </div>
      </div>
      <div *ngIf="
              formGroup.get('beneficialOwnership')?.invalid &&
              formGroup.get('beneficialOwnership')?.touched
            " class="error-message">
        This field is required.
      </div>
    </div>
  </div>
</div>

<div class="input-group2" style="margin-bottom: 3rem">
  <div style="display: flex; gap: 0.5rem; align-items: center">
    <label for="incomeDetails" scope="col">11) Income Details <span>*</span></label>
    <div pTooltip="Enter income details" tooltipPosition="right">
      <i class="pi pi-info-circle" style="font-size: 14px; color: #748297"></i>
    </div>
  </div>

  <div formGroupName="incomeDetails">
    <table style="width: 100%" class="inner-table">
      <thead>
        <tr>
          <th class="sub-labels" style="width: 5%">Sr. No</th>
          <th class="sub-labels" style="width: 35%">Particulars</th>
          <th class="sub-labels">Details</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1</td>
          <td>a) Source of Income:</td>
          <td>
            <p-multiselect id="incomeSource" formControlName="incomeSource" [options]="incomeSourceOptions"
              optionLabel="name" optionValue="code" placeholder="Enter Source of Income" class="full-width"
              appendTo="body" [filter]="true" [showClear]="true" [optionDisabled]="'disabled'" [showToggleAll]="false"
              [ngClass]="{
                    'invalid-field':
                      formGroup.get('incomeDetails.incomeSource')?.invalid &&
                      formGroup.get('incomeDetails.incomeSource')?.touched
                  }"></p-multiselect>
            <div
              *ngIf="formGroup.get('incomeDetails.incomeSource')?.invalid && formGroup.get('incomeDetails.incomeSource')?.touched"
              class="error-message">
              This field is required.
            </div>
          </td>
        </tr>

        <tr *ngIf="showBusinessCode()">
          <td>2</td>
          <td>b) Code for Business / Profession:</td>
          <td>
            <p-select id="businessCode" formControlName="businessCode" [options]="businessCodeOptions"
              optionLabel="name" optionValue="code" placeholder="Select Code for Business / Profession"
              class="full-width" [filter]="true" [showClear]="true" appendTo="body" [ngClass]="{
                    'invalid-field':
                      formGroup.get('incomeDetails.businessCode')?.invalid &&
                      formGroup.get('incomeDetails.businessCode')?.touched
                  }"></p-select>
            <div
              *ngIf="formGroup.get('incomeDetails.businessCode')?.invalid && formGroup.get('incomeDetails.businessCode')?.touched"
              class="error-message">
              This field is required.
            </div>
          </td>
        </tr>

        <tr>
          <td>3</td>
          <td>c) Annual Income (in ):</td>
          <td>
            <input id="annualIncome" type="text" pInputText formControlName="annualIncome"
              placeholder="Enter Your Income (in )" class="full-width" [ngClass]="{
                    'invalid-field':
                      formGroup.get('incomeDetails.annualIncome')?.invalid &&
                      formGroup.get('incomeDetails.annualIncome')?.touched
                  }"  (keypress)="incomeDetails($event)"/>
            <div
              *ngIf="formGroup.get('incomeDetails.annualIncome')?.invalid && formGroup.get('incomeDetails.annualIncome')?.touched"
              class="error-message">
              This field is required.
            </div>
          </td>
        </tr>

        <tr>
          <td>4</td>
          <td>d) Asset-less liabilities (in ):</td>
          <td>
            <input id="assetLess" type="text" pInputText formControlName="assetLess"
              placeholder="Specify Asset-less liabilities (in )" class="full-width" [ngClass]="{
                    'invalid-field':
                      formGroup.get('incomeDetails')?.errors?.['assetDateMismatch'] &&
                      !formGroup.get('incomeDetails.assetLess')?.value &&
                      formGroup.get('incomeDetails.assetLess')?.touched
                  }" (keypress)="incomeDetails($event)" />
            <div *ngIf="formGroup.get('incomeDetails')?.errors?.['assetDateMismatch'] &&
                            !formGroup.get('incomeDetails.assetLess')?.value &&
                            formGroup.get('incomeDetails.assetLess')?.touched" class="error-message">
              This field is required.
            </div>
          </td>
        </tr>

        <tr>
          <td>5</td>
          <td>e) Asset-less liabilities on date:</td>
          <td>
            <p-datepicker id="asOnDate" formControlName="asOnDate" [showIcon]="true" dateFormat="dd/mm/yy"
              appendTo="body" [maxDate]="maxDate" class="full-width" [ngClass]="{
                    'invalid-field':
                      formGroup.get('incomeDetails')?.errors?.['assetDateMismatch'] &&
                      !formGroup.get('incomeDetails.asOnDate')?.value &&
                      formGroup.get('incomeDetails.asOnDate')?.touched
                  }"></p-datepicker>
            <div *ngIf="formGroup.get('incomeDetails')?.errors?.['assetDateMismatch'] &&
                            !formGroup.get('incomeDetails.asOnDate')?.value &&
                            formGroup.get('incomeDetails.asOnDate')?.touched" class="error-message">
              As on Date is required.
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>



<div class="input-group" formGroupName="applicantType" style="display: flex; flex-direction: column; gap: 2rem">
  <div style="display: flex; flex-direction: column; gap: 1rem">
    <div style="display: flex; gap: 0.5rem; align-items: center">
      <label for="applicantTypeName">12) Type of the Applicant <span>*</span></label>
      <div pTooltip="Specify the applicant type" tooltipPosition="right">
        <i class="pi pi-info-circle" style="font-size: 14px; color: #748297"></i>
      </div>
    </div>
    <div>
      <p-select id="applicantTypeName" formControlName="applicantTypeName" placeholder="Select type of applicant"
        class="full-width" [showClear]="true" [options]="typeOfApplicants" optionLabel="description" optionValue="code"
        appendTo="body" [ngClass]="{
              'invalid-field':
                formGroup.get('applicantType.applicantTypeName')?.invalid &&
                formGroup.get('applicantType.applicantTypeName')?.touched
            }"></p-select>
      <div *ngIf="
              formGroup.get('applicantType.applicantTypeName')?.invalid &&
              formGroup.get('applicantType.applicantTypeName')?.touched
            " class="error-message">
        This field is required.
      </div>
    </div>
    <div *ngIf="
            formGroup.get('applicantType.applicantTypeName')?.value === 'TA6'
          ">
      <input type="text" pInputText placeholder="Enter other type of applicant"
        formControlName="applicantTypeOtherEntity" id="applicantTypeOtherEntity" [ngClass]="{
              'invalid-field':
              formGroup.get('applicantType')?.errors?.['otherRequired'] &&
  formGroup.get('applicantType.applicantTypeOtherEntity')?.touched
            }" />
      <div *ngIf="formGroup.get('applicantType')?.errors?.['otherRequired'] &&
  formGroup.get('applicantType.applicantTypeOtherEntity')?.touched" class="error-message">
        This field is required.
      </div>
    </div>
  </div>
</div>

<div class="input-group">
  <div style="display: flex; gap: 0.5rem; align-items: center">
    <label for="typeOfEntity" scope="col">13) Type of Entity <span>*</span></label>
    <div pTooltip="Select the type of entity" tooltipPosition="right">
      <i class="pi pi-info-circle" style="font-size: 14px; color: #748297"></i>
    </div>
  </div>
  <p-select id="typeOfEntity" formControlName="typeOfEntity" [options]="typeOfEntity" optionLabel="value"
    optionValue="code" placeholder="Select Type of Entity" class="w-full md:w-56" appendTo="body" [ngClass]="{
          'invalid-field':
            formGroup.get('typeOfEntity')?.invalid &&
            formGroup.get('typeOfEntity')?.touched
        }"></p-select>
  <div *ngIf="
          formGroup.get('typeOfEntity')?.invalid &&
          formGroup.get('typeOfEntity')?.touched
        " class="error-message">
    This field is required.
  </div>
</div>

<!-- Section 14: Document submitted as Proof of Identity and Proof of Address -->
<div class="input-group">
  <div style="display: flex; gap: 0.5rem; align-items: center">
    <label for="documentSubmitted" scope="col">14) Document submitted as Proof of Identity (POI) and Proof of
      Address (POA) <span>*</span></label>
    <div pTooltip="Select document" tooltipPosition="right">
      <i class="pi pi-info-circle" style="font-size: 14px; color: #748297"></i>
    </div>
  </div>
  <p-table [value]="docData" showGridlines [responsiveLayout]="'scroll'" class="p-datatable-striped">
    <ng-template pTemplate="header">
      <tr>
        <th scope="col">Sr. No</th>
        <th scope="col" class="sub-labels">Particulars</th>
        <th scope="col" class="sub-labels">Details</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-item let-i="rowIndex">
      <tr>
        <td class="max-table-width">{{ item.id }}</td>
        <td class="max-table-width">{{ item.name }}</td>
        <td class="max-table-width">
          <!-- Use individual controls based on index -->
          <p-select *ngIf="i === 0" id="proofOfIdentity" formControlName="proofOfIdentity"
            placeholder="{{ item.placeHolder }}" class="full-width" [showClear]="true"
            [options]="proofOfIdentityOptions" optionLabel="name" optionValue="code" appendTo="body" [ngClass]="{
                  'invalid-field':
                    formGroup.get('proofOfIdentity')?.invalid &&
                    formGroup.get('proofOfIdentity')?.touched
                }"></p-select>
          <div *ngIf="
                  i === 0 &&
                  formGroup.get('proofOfIdentity')?.invalid &&
                  formGroup.get('proofOfIdentity')?.touched
                " class="error-message">
            Date of incorporation is required.
          </div>
          <p-select *ngIf="i === 1" id="proofOfAddress" formControlName="proofOfAddress"
            placeholder="{{ item.placeHolder }}" class="full-width" [showClear]="true" [options]="
                  i === 0 ? proofOfIdentityOptions : proofOfAddressOptions
                " optionLabel="name" optionValue="code" appendTo="body" [ngClass]="{
                  'invalid-field':
                    formGroup.get('proofOfAddress')?.invalid &&
                    formGroup.get('proofOfAddress')?.touched
                }"></p-select>
          <div *ngIf="
                  i === 1 &&
                  formGroup.get('proofOfAddress')?.invalid &&
                  formGroup.get('proofOfAddress')?.touched
                " class="error-message">
            Date of incorporation is required.
          </div>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>

<div class="input-group">
  <div style="display: flex; gap: 0.5rem; align-items: center">
    <label for="politicallyExposed" scope="col">15) Whether the applicant or the applicant's authorized signatories
      is <span>*</span></label>
    <div pTooltip="Select option" tooltipPosition="right">
      <i class="pi pi-info-circle" style="font-size: 14px; color: #748297"></i>
    </div>
  </div>
  <div class="chose">
    <div class="last-item">
      <div style="display: flex; gap: 0.5rem; align-items: center">
        <label for="politicallyExposed" class="sub-labels">a) A politically exposed person</label>
        <div pTooltip="Select option" tooltipPosition="right">
          <i class="pi pi-info-circle" style="font-size: 14px; color: #748297"></i>
        </div>
      </div>
      <div style="display: flex; gap: 2rem">
        <div style="display: flex; align-items: center">
          <p-radioButton value="politicallyExposedYes" formControlName="politicallyExposed"
            inputId="politicallyExposedYes" [ngClass]="{
                  'invalid-field':
                    formGroup.get('politicallyExposed')?.invalid &&
                    formGroup.get('politicallyExposed')?.touched
                }"></p-radioButton>
          <label for="politicallyExposedYes" class="sub-labels" style="margin-left: 1rem">Yes</label>
        </div>
        <div style="display: flex; align-items: center">
          <p-radioButton value="politicallyExposedNo" formControlName="politicallyExposed"
            inputId="politicallyExposedNo" [ngClass]="{
                  'invalid-field':
                    formGroup.get('politicallyExposed')?.invalid &&
                    formGroup.get('politicallyExposed')?.touched
                }"></p-radioButton>
          <label for="politicallyExposedNo" class="sub-labels" style="margin-left: 1rem">No</label>
        </div>
        <div *ngIf="
                formGroup.get('politicallyExposed')?.invalid &&
                formGroup.get('politicallyExposed')?.touched
              " class="error-message">
          This field is required.
        </div>
      </div>
    </div>

    <div class="last-item">
      <div style="display: flex; gap: 0.5rem; align-items: center">
        <label for="relatedToPoliticallyExposed" class="sub-labels">b) Related to a politically exposed
          person</label>
        <div pTooltip="Select option" tooltipPosition="right">
          <i class="pi pi-info-circle" style="font-size: 14px; color: #748297"></i>
        </div>
      </div>
      <div style="display: flex; gap: 2rem">
        <div style="display: flex; align-items: center">
          <p-radioButton value="relatedToPoliticallyExposedYes" formControlName="relatedToPoliticallyExposed"
            inputId="relatedToPoliticallyExposedYes" [ngClass]="{
                  'invalid-field':
                    formGroup.get('relatedToPoliticallyExposed')?.invalid &&
                    formGroup.get('relatedToPoliticallyExposed')?.touched
                }"></p-radioButton>
          <label for="relatedToPoliticallyExposedYes" class="sub-labels" style="margin-left: 1rem">Yes</label>
        </div>
        <div style="display: flex; align-items: center">
          <p-radioButton value="relatedToPoliticallyExposedNo" formControlName="relatedToPoliticallyExposed"
            inputId="relatedToPoliticallyExposedNo" [ngClass]="{
                  'invalid-field':
                    formGroup.get('relatedToPoliticallyExposed')?.invalid &&
                    formGroup.get('relatedToPoliticallyExposed')?.touched
                }"></p-radioButton>
          <label for="relatedToPoliticallyExposedNo" class="sub-labels" style="margin-left: 1rem">No</label>
        </div>
        <div *ngIf="
                formGroup.get('relatedToPoliticallyExposed')?.invalid &&
                formGroup.get('relatedToPoliticallyExposed')?.touched
              " class="error-message">
          This field is required.
        </div>
      </div>
    </div>
  </div>
</div>
</form>
<app-loader *ngIf="showLoader"></app-loader>
</div>